<html>
<head>
    <script type="text/javascript">
    	var getSiteKey = function() {
		    var regexS = "[\\?&]sitekey=([^&#]*)";
		    var regex = new RegExp( regexS );
		    var results = regex.exec( window.location.href );
		    if( results == null ) {
		    	return "";
		    } else {
		    	return results[1];
		    }
		};
		var verifyCallback = function(response) {
			parent.postMessage(response, '*');
		};
		var recaptchaCallback = function() {
			alert ("Inside onloadCallback: ", grecaptcha);
			var siteKey = getSiteKey();
			alert (siteKey);
			grecaptcha.render('recaptcha', {
				'sitekey' : siteKey,
				'callback' : verifyCallback,
				'theme' : 'light',
				'size' : 'normal'
			});
		};
      var checkConnection = function() {
      	if (!grecaptcha) {
      		alert ('Something went wrong while we reach Google!!!');
      		parent.postMessage('FAILED', '*');
      	} else {
      		alert ('Hopefully we reached Google');
      	}
      };
    </script>
</head>

<body>
	<div id="recaptcha" align="center" style="transform:scale(0.77);-webkit-transform:scale(0.77);transform-origin:0 0;-webkit-transform-origin:0 0;"></div>
    <script src="https://www.google.com/recaptcha/api.js?onload=recaptchaCallback&render=explicit&hl=ta" async defer></script>
    <script>
		window.setTimeout(checkConnection, 5000);
	</script>
</body>
</html>